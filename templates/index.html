
<!DOCTYPE html>

<html>
<head>
<title>Dépôt CNAPS</title>
<style>
        body { font-family: Arial; background: #f5fff5; }
        label, input, textarea, select { display: block; margin: 10px 0; }
        #message {
            font-weight: bold;
            color: green;
            margin-top: 20px;
        }
    </style>
<script>
        function toggleHeberge() {
            var section = document.getElementById("heberge_section");
            section.style.display = document.getElementById("heberge").checked ? "block" : "none";
        }

        function showMessage() {
            const message = document.getElementById("message");
            message.innerText = "Votre dossier est en cours d'envoi...";
        }

        window.addEventListener("DOMContentLoaded", () => {
            const params = new URLSearchParams(window.location.search);
            if (params.get("submitted") === "true") {
                document.getElementById("message").innerText = "Votre dossier a bien été transmis.";
            }
        });
    </script>
</head>
<body><img alt="Logo" src="/static/logo_integrale_academy.png" style="height: 80px;"/>
<img alt="Logo Intégrale Academy" src="{{ url_for('static', filename='logo_integrale_academy.png') }}" style="max-height: 80px;"/>
<h2>Formulaire de dépôt CNAPS</h2>
<div id="message"></div>
<form action="/submit" enctype="multipart/form-data" method="POST" onsubmit="showMessage()">
<label>Nom :</label><input name="nom" required="" type="text"/>
<label>Prénom :</label><input name="prenom" required="" type="text"/>
<label>Email :</label><input name="email" required="" type="email"/>
<label>Carte d'identité / Passeport / Titre de séjour (plusieurs fichiers) :</label>
<input multiple="" name="id_files" required="" type="file"/>
<label>Justificatif de domicile :</label>
<strong>Uniquement facture de gaz, d'électricité, d'eau ou quittance de loyer (PAS de facture de téléphone)</strong>
<input name="domicile_file" required="" type="file"/>
<label><input id="heberge" onchange="toggleHeberge()" type="checkbox"/> Je suis hébergé(e)</label>
<div id="heberge_section" style="display: none;">
<label>Pièce d'identité de l'hébergeant :</label>
<input name="identite_hebergeant" type="file"/>
<label>Attestation d'hébergement :</label>
<input name="attestation_hebergement" type="file"/>
</div>
<button type="submit">Envoyer</button>
</form>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const urlParams = new URLSearchParams(window.location.search);
    const messageArea = document.getElementById("message-area");

    if (urlParams.get("submitted") === "true") {
        messageArea.innerText = "✅ Votre dossier a bien été transmis.";
        messageArea.style.color = "green";
    }

    const form = document.querySelector("form");
    if (form) {
        form.addEventListener("submit", function () {
            messageArea.innerText = "⏳ Votre dossier est en cours d’envoi…";
            messageArea.style.color = "orange";
        });
    }
});
</script></body>
</html>
